<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Web.Larceny</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Web-Larceny.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Web-Larceny.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">larceny-0.1.0.0</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Web.Larceny</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A long description with example use with Scotty.</p><p>It'll be something like:</p><p>Write some templates.</p><p>Add a <code><a href="Web-Larceny.html#t:Library">Library</a></code> to your Scotty state with <code><a href="Web-Larceny.html#v:loadTemplates">loadTemplates</a></code>.</p><p>Write some <code><a href="Web-Larceny.html#t:Substitutions">Substitutions</a></code>.</p><p>Write some Larceny/Scotty glue.</p><p>Use <code><a href="Web-Larceny.html#v:render">render</a></code> and <code><a href="Web-Larceny.html#v:renderWith">renderWith</a></code> in your Scotty handlers.</p><p>Admire your lovely app!!</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span> <a href="#t:Blank">Blank</a> = <a href="#v:Blank">Blank</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Fill">Fill</a> s = <a href="#v:Fill">Fill</a> {<ul class="subs"><li><a href="#v:unFill">unFill</a> :: <a href="Web-Larceny.html#t:Attributes">Attributes</a> -&gt; (<a href="Web-Larceny.html#t:Path">Path</a>, <a href="Web-Larceny.html#t:Template">Template</a> s) -&gt; <a href="Web-Larceny.html#t:Library">Library</a> s -&gt; <a href="../mtl-2.2.1/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:Attributes">Attributes</a> = <a href="../containers-0.5.6.2/Data-Map-Lazy.html#t:Map">Map</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Substitutions">Substitutions</a> s = <a href="../containers-0.5.6.2/Data-Map-Lazy.html#t:Map">Map</a> <a href="Web-Larceny.html#t:Blank">Blank</a> (<a href="Web-Larceny.html#t:Fill">Fill</a> s)</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Template">Template</a> s = <a href="#v:Template">Template</a> {<ul class="subs"><li><a href="#v:runTemplate">runTemplate</a> :: <a href="Web-Larceny.html#t:Path">Path</a> -&gt; <a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s -&gt; <a href="Web-Larceny.html#t:Library">Library</a> s -&gt; <a href="../mtl-2.2.1/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:Path">Path</a> = [<a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>]</li><li class="src short"><span class="keyword">type</span> <a href="#t:Library">Library</a> s = <a href="../containers-0.5.6.2/Data-Map-Lazy.html#t:Map">Map</a> <a href="Web-Larceny.html#t:Path">Path</a> (<a href="Web-Larceny.html#t:Template">Template</a> s)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Overrides">Overrides</a> = <a href="#v:Overrides">Overrides</a> {<ul class="subs"><li><a href="#v:customPlainNodes">customPlainNodes</a> :: [<a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>]</li><li><a href="#v:overrideNodes">overrideNodes</a> :: [<a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>]</li></ul>}</li><li class="src short"><a href="#v:defaultOverrides">defaultOverrides</a> :: <a href="Web-Larceny.html#t:Overrides">Overrides</a></li><li class="src short"><a href="#v:render">render</a> :: <a href="Web-Larceny.html#t:Library">Library</a> s -&gt; s -&gt; <a href="Web-Larceny.html#t:Path">Path</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>)</li><li class="src short"><a href="#v:renderWith">renderWith</a> :: <a href="Web-Larceny.html#t:Library">Library</a> s -&gt; <a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s -&gt; s -&gt; <a href="Web-Larceny.html#t:Path">Path</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>)</li><li class="src short"><a href="#v:renderRelative">renderRelative</a> :: <a href="Web-Larceny.html#t:Library">Library</a> s -&gt; <a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s -&gt; s -&gt; <a href="Web-Larceny.html#t:Path">Path</a> -&gt; <a href="Web-Larceny.html#t:Path">Path</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>)</li><li class="src short"><a href="#v:loadTemplates">loadTemplates</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Web-Larceny.html#t:Overrides">Overrides</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Web-Larceny.html#t:Library">Library</a> s)</li><li class="src short"><a href="#v:subs">subs</a> :: [(<a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>, <a href="Web-Larceny.html#t:Fill">Fill</a> s)] -&gt; <a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s</li><li class="src short"><a href="#v:textFill">textFill</a> :: <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s</li><li class="src short"><a href="#v:textFill-39-">textFill'</a> :: <a href="../mtl-2.2.1/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s</li><li class="src short"><a href="#v:mapSubs">mapSubs</a> :: (a -&gt; <a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s) -&gt; [a] -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s</li><li class="src short"><a href="#v:mapSubs-39-">mapSubs'</a> :: (a -&gt; <a href="../mtl-2.2.1/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s)) -&gt; [a] -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s</li><li class="src short"><a href="#v:fillChildren">fillChildren</a> :: <a href="Web-Larceny.html#t:Fill">Fill</a> s</li><li class="src short"><a href="#v:fillChildrenWith">fillChildrenWith</a> :: <a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s</li><li class="src short"><a href="#v:fillChildrenWith-39-">fillChildrenWith'</a> :: <a href="../mtl-2.2.1/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s) -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s</li><li class="src short"><a href="#v:maybeFillChildrenWith">maybeFillChildrenWith</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s) -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s</li><li class="src short"><a href="#v:maybeFillChildrenWith-39-">maybeFillChildrenWith'</a> :: <a href="../mtl-2.2.1/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s)) -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s</li><li class="src short"><a href="#v:useAttrs">useAttrs</a> :: (<a href="Web-Larceny.html#t:Attributes">Attributes</a> -&gt; k -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s) -&gt; k -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s</li><li class="src short"><span class="keyword">class</span> <a href="#t:FromAttribute">FromAttribute</a> a <span class="keyword">where</span><ul class="subs"><li><a href="#v:fromAttribute">fromAttribute</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> -&gt; <a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> <a href="Web-Larceny.html#t:AttrError">AttrError</a> a</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:AttrError">AttrError</a><ul class="subs"><li>= <a href="#v:AttrMissing">AttrMissing</a></li><li>| <a href="#v:AttrUnparsable">AttrUnparsable</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a></li><li>| <a href="#v:AttrOtherError">AttrOtherError</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a></li></ul></li><li class="src short"><a href="#v:a">a</a> :: <a href="Web-Larceny.html#t:FromAttribute">FromAttribute</a> a =&gt; <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> -&gt; <a href="Web-Larceny.html#t:Attributes">Attributes</a> -&gt; (a -&gt; b) -&gt; b</li><li class="src short"><a href="#v:-37-">(%)</a> :: (<a href="Web-Larceny.html#t:Attributes">Attributes</a> -&gt; a -&gt; b) -&gt; (<a href="Web-Larceny.html#t:Attributes">Attributes</a> -&gt; b -&gt; c) -&gt; <a href="Web-Larceny.html#t:Attributes">Attributes</a> -&gt; a -&gt; c</li><li class="src short"><a href="#v:parse">parse</a> :: <a href="../text-1.2.2.1/Data-Text-Lazy.html#t:Text">Text</a> -&gt; <a href="Web-Larceny.html#t:Template">Template</a> s</li><li class="src short"><a href="#v:parseWithOverrides">parseWithOverrides</a> :: <a href="Web-Larceny.html#t:Overrides">Overrides</a> -&gt; <a href="../text-1.2.2.1/Data-Text-Lazy.html#t:Text">Text</a> -&gt; <a href="Web-Larceny.html#t:Template">Template</a> s</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Blank" class="def">Blank</a> <a href="src/Web-Larceny.html#Blank" class="link">Source</a></p><div class="doc"><p>A &quot;blank&quot; in the template that can be filled in with some
 value by Haskell code.
 Blanks can be tags or they can be all or parts of attribute values in tags.</p><p>Example blanks:</p><pre>&lt;skater&gt;                           &lt;- &quot;skater&quot;
&lt;p class=${name}&gt;                  &lt;- &quot;name&quot;
&lt;skater name=&quot;${name}&quot;&gt;            &lt;- both &quot;skater&quot; and &quot;name&quot;
&lt;a href=&quot;teams/${team}/{$number}&quot;&gt; &lt;- both &quot;team&quot; and number&quot;
</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Blank" class="def">Blank</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Blank" class="caption collapser" onclick="toggleSection('i:Blank')">Instances</p><div id="section.i:Blank" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> <a href="Web-Larceny.html#t:Blank">Blank</a></span> <a href="src/Web-Larceny.html#line-90" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> <a href="Web-Larceny.html#t:Blank">Blank</a></span> <a href="src/Web-Larceny.html#line-90" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> <a href="Web-Larceny.html#t:Blank">Blank</a></span> <a href="src/Web-Larceny.html#line-90" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../hashable-1.2.4.0/Data-Hashable.html#t:Hashable">Hashable</a> <a href="Web-Larceny.html#t:Blank">Blank</a></span> <a href="src/Web-Larceny.html#line-90" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Fill" class="def">Fill</a> s <a href="src/Web-Larceny.html#Fill" class="link">Source</a></p><div class="doc"><p>A  Fill is how to fill in a Blank.</p><p>In most cases, you can use helper functions like <code><a href="Web-Larceny.html#v:textFill">textFill</a></code> or
 <code><a href="Web-Larceny.html#v:fillChildrenWith">fillChildrenWith</a></code> to create your fills. You can also write Fills
 from scratch.</p><pre>Fill $ attrs _tpl _lib -&gt;
         return $ T.pack $ show $ M.keys attrs)
</pre><p>With that Fill, a Blank like this:</p><pre>&lt;displayAttrs attribute=&quot;hello!&quot; another=&quot;goodbye!&quot;/&gt;</pre><p>would be rendered as:</p><pre>[&quot;attribute&quot;, &quot;another&quot;]</pre><p>Fills (and Substitutions and Templates) have the type `StateT s IO
 Text` in case you need templates to depend on IO actions (like
 looking something up in a database) or store state (perhaps keeping
 track of what's already been rendered).</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Fill" class="def">Fill</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:unFill" class="def">unFill</a> :: <a href="Web-Larceny.html#t:Attributes">Attributes</a> -&gt; (<a href="Web-Larceny.html#t:Path">Path</a>, <a href="Web-Larceny.html#t:Template">Template</a> s) -&gt; <a href="Web-Larceny.html#t:Library">Library</a> s -&gt; <a href="../mtl-2.2.1/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Attributes" class="def">Attributes</a> = <a href="../containers-0.5.6.2/Data-Map-Lazy.html#t:Map">Map</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> <a href="src/Web-Larceny.html#Attributes" class="link">Source</a></p><div class="doc"><p>The Blank's attributes, a map from the attribute name to
 it's value.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Substitutions" class="def">Substitutions</a> s = <a href="../containers-0.5.6.2/Data-Map-Lazy.html#t:Map">Map</a> <a href="Web-Larceny.html#t:Blank">Blank</a> (<a href="Web-Larceny.html#t:Fill">Fill</a> s) <a href="src/Web-Larceny.html#Substitutions" class="link">Source</a></p><div class="doc"><p>A map from Blanks to how to fill in the Blank.</p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Template" class="def">Template</a> s <a href="src/Web-Larceny.html#Template" class="link">Source</a></p><div class="doc"><p>When you run a Template with the path, some substitutions, and the
 template library, you'll get back some stateful text.</p><p>Use <code><a href="Web-Larceny.html#v:loadTemplates">loadTemplates</a></code> to load the templates from some directory
 into a template library. Use the <code><a href="Web-Larceny.html#v:render">render</a></code> functions to render
 templates by path.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Template" class="def">Template</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:runTemplate" class="def">runTemplate</a> :: <a href="Web-Larceny.html#t:Path">Path</a> -&gt; <a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s -&gt; <a href="Web-Larceny.html#t:Library">Library</a> s -&gt; <a href="../mtl-2.2.1/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Path" class="def">Path</a> = [<a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>] <a href="src/Web-Larceny.html#Path" class="link">Source</a></p><div class="doc"><p>The path to a template.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Library" class="def">Library</a> s = <a href="../containers-0.5.6.2/Data-Map-Lazy.html#t:Map">Map</a> <a href="Web-Larceny.html#t:Path">Path</a> (<a href="Web-Larceny.html#t:Template">Template</a> s) <a href="src/Web-Larceny.html#Library" class="link">Source</a></p><div class="doc"><p>A collection of templates.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Overrides" class="def">Overrides</a> <a href="src/Web-Larceny.html#Overrides" class="link">Source</a></p><div class="doc"><p>If no substitutions are given, Larceny only understands valid
 HTML 5 tags. It won't attempt to &quot;fill in&quot; tags that are already
 valid HTML 5. Use Overrides to use non-HTML 5 tags without
 providing your own substitutions, or to provide fills for standard HTML tags.</p><pre>-- Use the deprecated &quot;marquee&quot; and &quot;blink&quot; tags and write your
-- own fill for the &quot;a&quot; tag.
Overrides [&quot;marquee&quot;, &quot;blink&quot;] [&quot;a&quot;]
</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Overrides" class="def">Overrides</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:customPlainNodes" class="def">customPlainNodes</a> :: [<a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>]</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:overrideNodes" class="def">overrideNodes</a> :: [<a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>]</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:defaultOverrides" class="def">defaultOverrides</a> :: <a href="Web-Larceny.html#t:Overrides">Overrides</a> <a href="src/Web-Larceny.html#defaultOverrides" class="link">Source</a></p><div class="doc"><p>Default uses no overrides.</p></div></div><div class="top"><p class="src"><a name="v:render" class="def">render</a> :: <a href="Web-Larceny.html#t:Library">Library</a> s -&gt; s -&gt; <a href="Web-Larceny.html#t:Path">Path</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>) <a href="src/Web-Larceny.html#render" class="link">Source</a></p><div class="doc"><p>Render a template from the library by path.</p><pre>render appTemplates appState [&quot;path&quot;, &quot;to&quot;, &quot;template&quot;]
</pre></div></div><div class="top"><p class="src"><a name="v:renderWith" class="def">renderWith</a> :: <a href="Web-Larceny.html#t:Library">Library</a> s -&gt; <a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s -&gt; s -&gt; <a href="Web-Larceny.html#t:Path">Path</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>) <a href="src/Web-Larceny.html#renderWith" class="link">Source</a></p><div class="doc"><p>Render a template from the library by path, with some additional
 substitutions.</p><pre>renderWith appTemplates extraSubs appState [&quot;path&quot;, &quot;to&quot;, &quot;template&quot;]
</pre></div></div><div class="top"><p class="src"><a name="v:renderRelative" class="def">renderRelative</a> :: <a href="Web-Larceny.html#t:Library">Library</a> s -&gt; <a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s -&gt; s -&gt; <a href="Web-Larceny.html#t:Path">Path</a> -&gt; <a href="Web-Larceny.html#t:Path">Path</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>) <a href="src/Web-Larceny.html#renderRelative" class="link">Source</a></p><div class="doc"><p>Render a template found relative to current template's path.</p><p>This will attempt to find the target template starting at the same
 level as the given path, then will traverse up the directory tree
 until it finds a template with the target path.</p><p>For example: Given these templates: [&quot;current&quot;], [&quot;current&quot;,
 &quot;dashboard&quot;], [&quot;current&quot;, &quot;private&quot;, &quot;dashboard&quot;], [&quot;private&quot;,
 &quot;dashboard&quot;], <code><a href="Web-Larceny.html#v:renderRelative">renderRelative</a></code> called with a given path of
 [&quot;current&quot;] and target path of [&quot;private&quot;, &quot;dashboard&quot;] will find
 [&quot;current&quot;, &quot;private&quot;, &quot;dashboard&quot;]. If there <em>wasn't</em> a [&quot;current&quot;,
 &quot;private&quot;, &quot;dashboard&quot;], it would render [&quot;private&quot;, &quot;dashboard&quot;].</p></div></div><div class="top"><p class="src"><a name="v:loadTemplates" class="def">loadTemplates</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Web-Larceny.html#t:Overrides">Overrides</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Web-Larceny.html#t:Library">Library</a> s) <a href="src/Web-Larceny.html#loadTemplates" class="link">Source</a></p><div class="doc"><p>Load all the templates in some directory into a Library.</p></div></div><div class="top"><p class="src"><a name="v:subs" class="def">subs</a> :: [(<a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>, <a href="Web-Larceny.html#t:Fill">Fill</a> s)] -&gt; <a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s <a href="src/Web-Larceny.html#subs" class="link">Source</a></p><div class="doc"><p>Turn tuples of text and fills to Substitutions.</p><pre>subs [(&quot;blank&quot;, textFill &quot;the fill&quot;)
     ,(&quot;another-blank&quot;, textFill &quot;another fill&quot;)]
</pre></div></div><div class="top"><p class="src"><a name="v:textFill" class="def">textFill</a> :: <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s <a href="src/Web-Larceny.html#textFill" class="link">Source</a></p><div class="doc"><p>A plain text fill.</p><pre>textFill &quot;This text will be displayed in place of the blank&quot;
</pre></div></div><div class="top"><p class="src"><a name="v:textFill-39-" class="def">textFill'</a> :: <a href="../mtl-2.2.1/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s <a href="src/Web-Larceny.html#textFill%27" class="link">Source</a></p><div class="doc"><p>Use state or IO, then fill in some text.</p><pre>-- getTextFromDatabase :: StateT () IO Text
textFill' getTextFromDatabase
</pre></div></div><div class="top"><p class="src"><a name="v:mapSubs" class="def">mapSubs</a> :: (a -&gt; <a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s) -&gt; [a] -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s <a href="src/Web-Larceny.html#mapSubs" class="link">Source</a></p><div class="doc"><p>Create substitutions for each element in a list and fill the child nodes
 with those substitutions.</p><pre>&lt;members&gt;&lt;name /&gt;&lt;/members&gt;
(&quot;members&quot;, mapSubs (name -&gt; subs [(&quot;name&quot;, textFill name)])
                    [&quot;Bonnie Thunders&quot;, &quot;Donna Matrix&quot;, &quot;Beyonslay&quot;]
</pre><pre>Bonnie Thunders Donna Matrix Beyonslay</pre></div></div><div class="top"><p class="src"><a name="v:mapSubs-39-" class="def">mapSubs'</a> :: (a -&gt; <a href="../mtl-2.2.1/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s)) -&gt; [a] -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s <a href="src/Web-Larceny.html#mapSubs%27" class="link">Source</a></p><div class="doc"><p>Create substitutions for each element in a list (using IO/state if
 needed) and fill the child nodes with those substitutions.</p></div></div><div class="top"><p class="src"><a name="v:fillChildren" class="def">fillChildren</a> :: <a href="Web-Larceny.html#t:Fill">Fill</a> s <a href="src/Web-Larceny.html#fillChildren" class="link">Source</a></p><div class="doc"><p>Fill in the child nodes of the blank with substitutions already
 available.</p><pre>&lt;no-op&gt;&lt;p&gt;Same&lt;/p&gt;&lt;/no-op&gt;
(&quot;no-op&quot;, fillChildren)
</pre><pre>&lt;p&gt;Same&lt;/p&gt;</pre></div></div><div class="top"><p class="src"><a name="v:fillChildrenWith" class="def">fillChildrenWith</a> :: <a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s <a href="src/Web-Larceny.html#fillChildrenWith" class="link">Source</a></p><div class="doc"><p>Fill in the child nodes of the blank with new substitutions.</p><pre>&lt;member&gt;&lt;name /&gt;&lt;/member&gt;
(&quot;skater&quot;, fillChildrenWith (subs $ [(&quot;name&quot;, textFill &quot;Bonnie Thunders&quot;)]))
</pre><pre>Beyonslay</pre></div></div><div class="top"><p class="src"><a name="v:fillChildrenWith-39-" class="def">fillChildrenWith'</a> :: <a href="../mtl-2.2.1/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s) -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s <a href="src/Web-Larceny.html#fillChildrenWith%27" class="link">Source</a></p><div class="doc"><p>Use substitutions with State and IO.</p><pre>&lt;changeTheWorld&gt;&lt;results /&gt;&lt;/changeTheWorld&gt;
-- doABunchOfStuffAndGetSubstitutions :: StateT () IO (Substitutions ())
(&quot;changeTheWorld&quot;, fillChildrenWith' doStuffAndGetSubstitutions)
</pre><pre>This template did IO!</pre></div></div><div class="top"><p class="src"><a name="v:maybeFillChildrenWith" class="def">maybeFillChildrenWith</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s) -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s <a href="src/Web-Larceny.html#maybeFillChildrenWith" class="link">Source</a></p><div class="doc"><p>Fill with substitutions if those substitutions are provided.</p><pre>&lt;ifDisplayUser&gt;&lt;userName /&gt;&lt;/ifDisplayUser&gt;
(&quot;ifDisplayUser&quot;, maybeFillChildrenWith
                    (Just $ subs' (&quot;userName&quot;, textFill &quot;Bonnie Thunders&quot;)))
</pre><pre>Bonnie Thunders</pre></div></div><div class="top"><p class="src"><a name="v:maybeFillChildrenWith-39-" class="def">maybeFillChildrenWith'</a> :: <a href="../mtl-2.2.1/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Web-Larceny.html#t:Substitutions">Substitutions</a> s)) -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s <a href="src/Web-Larceny.html#maybeFillChildrenWith%27" class="link">Source</a></p><div class="doc"><p>Use state and IO and maybe fill in with some substitutions.</p><pre>&lt;ifLoggedIn&gt;Logged in as &lt;userName /&gt;&lt;/ifLoggedIn&gt;
(&quot;ifLoggedIn&quot;, maybeFillChildrenWith' $ do
                 mUser &lt;- getLoggedInUser -- returns (Just &quot;Bonnie Thunders&quot;)
                 case mUser of
                   Just user -&gt; Just $ subs' (&quot;userName&quot;, textFill user)
                   Nothing   -&gt; Nothing)
</pre><pre>Bonnie Thunders</pre></div></div><div class="top"><p class="src"><a name="v:useAttrs" class="def">useAttrs</a> :: (<a href="Web-Larceny.html#t:Attributes">Attributes</a> -&gt; k -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s) -&gt; k -&gt; <a href="Web-Larceny.html#t:Fill">Fill</a> s <a href="src/Web-Larceny.html#useAttrs" class="link">Source</a></p><div class="doc"><p>Use attributes from the the blank as arguments to the fill.</p><pre>&lt;desc length=&quot;10&quot; /&gt;
(&quot;desc&quot;, useAttrs (a&quot;length&quot;) descriptionFill)
descriptionFill len = textFill $ T.take len
                                 &quot;A really long description&quot;
                                 &lt;&gt; &quot;...&quot;))
</pre><pre>A really l...</pre><p><code><a href="Web-Larceny.html#v:useAttrs">useAttrs</a></code> takes two arguments. The first is a way to get values of
 attributes that you can use in Fills. You can use <code><a href="Web-Larceny.html#v:a">a</a></code> and <code><a href="Web-Larceny.html#v:-37-">%</a></code> to
 create these. The second argument is a function that uses the
 values of those attributes to create a Fill.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:FromAttribute" class="def">FromAttribute</a> a <span class="keyword">where</span> <a href="src/Web-Larceny.html#FromAttribute" class="link">Source</a></p><div class="doc"><p>A typeclass for things that can be parsed from attributes.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:fromAttribute" class="def">fromAttribute</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> -&gt; <a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> <a href="Web-Larceny.html#t:AttrError">AttrError</a> a <a href="src/Web-Larceny.html#fromAttribute" class="link">Source</a></p></div><div class="subs instances"><p id="control.i:FromAttribute" class="caption collapser" onclick="toggleSection('i:FromAttribute')">Instances</p><div id="section.i:FromAttribute" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Web-Larceny.html#t:FromAttribute">FromAttribute</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></span> <a href="src/Web-Larceny.html#line-369" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Web-Larceny.html#t:FromAttribute">FromAttribute</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a></span> <a href="src/Web-Larceny.html#line-367" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Web-Larceny.html#t:FromAttribute">FromAttribute</a> a =&gt; <a href="Web-Larceny.html#t:FromAttribute">FromAttribute</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> a)</span> <a href="src/Web-Larceny.html#line-372" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:AttrError" class="def">AttrError</a> <a href="src/Web-Larceny.html#AttrError" class="link">Source</a></p><div class="doc"><p>If an attribute is required but missing, or unparsable, one of
 these errors is thrown.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:AttrMissing" class="def">AttrMissing</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:AttrUnparsable" class="def">AttrUnparsable</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:AttrOtherError" class="def">AttrOtherError</a> <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:AttrError" class="caption collapser" onclick="toggleSection('i:AttrError')">Instances</p><div id="section.i:AttrError" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> <a href="Web-Larceny.html#t:AttrError">AttrError</a></span> <a href="src/Web-Larceny.html#line-361" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> <a href="Web-Larceny.html#t:AttrError">AttrError</a></span> <a href="src/Web-Larceny.html#line-361" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:a" class="def">a</a> :: <a href="Web-Larceny.html#t:FromAttribute">FromAttribute</a> a =&gt; <a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a> -&gt; <a href="Web-Larceny.html#t:Attributes">Attributes</a> -&gt; (a -&gt; b) -&gt; b <a href="src/Web-Larceny.html#a" class="link">Source</a></p><div class="doc"><p>Prepend <code><a href="Web-Larceny.html#v:a">a</a></code> to the name of an attribute to pass the value of that
 attribute to the fill.</p><p>The type of the attribute is whatever type the fill expects. If <code><a href="Web-Larceny.html#v:a">a</a></code>
 can't parse the value, then there will be an error when the template
 is rendered.</p></div></div><div class="top"><p class="src"><a name="v:-37-" class="def">(%)</a> :: (<a href="Web-Larceny.html#t:Attributes">Attributes</a> -&gt; a -&gt; b) -&gt; (<a href="Web-Larceny.html#t:Attributes">Attributes</a> -&gt; b -&gt; c) -&gt; <a href="Web-Larceny.html#t:Attributes">Attributes</a> -&gt; a -&gt; c <a href="src/Web-Larceny.html#%25" class="link">Source</a></p><div class="doc"><p>Use with <code><a href="Web-Larceny.html#v:a">a</a></code> to use multiple attributes in the fill.</p><pre>&lt;desc length=&quot;10&quot; /&gt;
(&quot;desc&quot;, useAttrs (a&quot;length&quot; % a&quot;ending&quot;) descriptionFill)
descriptionFill len maybeEnding =
  let ending = fromMaybe &quot;...&quot; maybeEnding in
  textFill $ T.take n
             &quot;A really long description&quot;
             &lt;&gt; ending))
</pre><pre>A really l...</pre></div></div><div class="top"><p class="src"><a name="v:parse" class="def">parse</a> :: <a href="../text-1.2.2.1/Data-Text-Lazy.html#t:Text">Text</a> -&gt; <a href="Web-Larceny.html#t:Template">Template</a> s <a href="src/Web-Larceny.html#parse" class="link">Source</a></p><div class="doc"><p>Turn lazy text into templates.</p></div></div><div class="top"><p class="src"><a name="v:parseWithOverrides" class="def">parseWithOverrides</a> :: <a href="Web-Larceny.html#t:Overrides">Overrides</a> -&gt; <a href="../text-1.2.2.1/Data-Text-Lazy.html#t:Text">Text</a> -&gt; <a href="Web-Larceny.html#t:Template">Template</a> s <a href="src/Web-Larceny.html#parseWithOverrides" class="link">Source</a></p><div class="doc"><p>Use overrides when parsing a template.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>